---
title: "반복문 쓰지않고 각 자리수의 합 구하기 - 재귀호출"
date: 2019-05-18 02:30:00 -0400
categories: python, algorithm
---

for 나 while문 같은 반복문을 사용하지 않고,

코드에서 반복적인 작업을 하는 방법으로는 "재귀호출" (recursion)이 있다.

재귀호출은 자기 자신을 부르는 것, 재귀함수란 함수내에서 해당 함수를 호출하는 함수를 의미한다.

실생활에서 예를 들어보면 다음과 같다.

거울이 양쪽에 달린 엘리베이터를 타면 반복되어 반사되어 비춘다.

카메라가 연동되어 영상이 출력되는 모니터를 카메라로 비추면 

모니터를 찍는 나의 모습이, 모니터에 나오는게, 모니터에 나오는게, 모니터에 나와서...가 무한 반복되어 나온다.

스피커에 연결된 마이크에 스피커 소리가 들어가면 삐-이 소리가 나는것도 이와 유사하다.

이래도 이해가 가지 않는다면, 이제부터 

자기 이름이 불리면 자기 이름을 또 부른다고 정해보자! 그리고 자기 이름을 불러보자.

...

...


이제 그만 부르고 재귀 함수를 작성해보자

재귀 함수를 작성하는 방법은 딱 두가지만 생각해보면 된다.


```
1. 같은 패턴의 작은 부분을 푼다 
2. 작은 부분을 쪼개고 쪼개서 마지막에 도달하는 초기 조건을 정한다
```

정의만 보면 이해가 가지 않을테니, 팩토리얼을 예를 들어보자. 5!을 구해보자

```
5! = 5 * 4 * 3 * 2 * 1 =  5 * ( 4 * 3 * 2 * 1 ) = 5 * 4! 과 같고, 4! 은 4 * 3! 과 같다.
```

n으로 표현하면 n! = n * (n-1)! 이다.

계속 반복해보면 쪼개고 쪼개서 마지막으로는 1! = 1 * 0! 까지 오게될것이다.

0!이 최종 단계이고 0!은 1이다 라는 사실을 정해주면 끝난다. 

이를 코드로 구현하면 아래와 같다.


```python
def factorial(number):
    if number == 0:
        # 초기 조건
        return 1
    else:
        # 작은 부분을 구하도록 자기 자신한테 일을 넘긴다 --> 재귀 호출
        return factorial(number - 1) * number
```

위와 같이 재귀함수는 반복문을 사용할때 더 복잡한 경우에 사용하면 유용하다.

문제상황이 크고 (예를 들어 1000! 구해본다고 하면)

문제의 일부가 같은 패턴의 문제이고 쪼갤수 있다면 (1000! = 1000 * 999!)

초기 조건만 최종적으로 컴퓨터한테 던져주고, 

연쇄 상황을 만들어서 큰 문제도 해결할 수 있는 원리이다.



위의 팩토리얼 코드만 보면서 프로그램 동작 흐름을 따라가면 어려움을 느낄수있다.

factorial(5) 가 0이 아니니까 factorial(4)를 호출하고 

factorial(4)는 factorial(3)을 호출하고.. 그럼 곱하기는 언제 되는거지?? (@_@ 아 복잡하다)




반복문처럼 코드에 동작이 드러나 있지 않아 보이기 때문이다. 

거꾸로 초기 조건을 기준으로 코드를 보면 사람이 이해하기 쉬운 코드가 된다.

재귀호출은 초기 조건에 무~조건! 들어가게 되어있다. 만약 그렇지 않다면 잘못짠 코드다

거꾸로 시작해보자.

초기조건인 factorial(0)은 1을 반환한다.  

factorial(0)은 factorial(1)이 호출했을것이라서 1을 곱하고 반환한다. 

factorial(1)은 factorial(2)가 호출했을 것이고 2를 곱하고.. 

이렇게 반복되어 5까지 오게되면 




컴퓨터에서 연산이 어떻게 반복적으로 값이 곱해지는지 파악할 수있다.

처음 재귀함수의 개념을 이해하는데는 이렇게 하나하나 동작을 따져보는것이 필요하지만, 

n! = n * (n-1)! 수식을 코드로 구현 했다 라는 감각으로 코드를 보는 훈련이 필요하다.




자 그럼 응용문제로 473276535 같은 큰 숫자가 주어지고

각 자리수의 합을 반복문을 사용하지 않고 구하는 코드를 작성하라는 문제가 있다.

풀이 방법을 간단하게 생각해보기 위해 123 이라는 숫자를 생각해보자

그리고 생각하기 쉽게 자리수를 계산해주는 것의 이름을 "자림이"라고 지어보자. 

(내마음대로 지어보았다)

자림이(123)은 자림이(12) + 자림이(3)이 되고 

자림이(12)는 또 작게 쪼개서 자림이(1) + 자림이(2)가 된다

이처럼 일의 자리수를 떼어내면 

똑같이 우리의 자림이를 적용할 수 있는 작은 문제가 되고. 

결국 쪼개다보면 1의 자리수만 구하면 된다.

이를 코드로 구하기전에 한가지더 생각해볼것이 있다.

1의 자리수를 어떻게 떼어낼까?

간단하게 10으로 나눈 나머지를 구하면 된다. 

떼어내고 남은건 나누기로 구한 몫이다. 

```
123 % 10 = 3
123 // 10 = 123
```

이를 적용해서 자리수를 계산해주는 자림이를 반복문을 쓰지않고 재귀함수로 구현하면 다음과 같다.

```python
def jarim(number):
    if number // 10 == 0:
        # 최종 한자리수이면 입력값을 반환
        return number
    else:
        # 일의 자리수를 더해주고 나머지 작아진 문제를 다시 자림이한테 던진다
        jarim(number // 10) + (number % 10)
```

다음번엔 재귀함수를 응용한, 유용한 함수 작성법에 대해 알아볼것이다. 

